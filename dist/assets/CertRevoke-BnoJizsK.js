/* empty css             */import"./request-DHoSJWvM.js";/* empty css                *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                 */import{a as S,o as v,c as A,b as m,e,w as a,T as N,D as V,K as M,L as x,M as F,N as T,W as w,X as P,a2 as D,h as U,E as h,u as B,a3 as K,p as E,s as z,a4 as H,y as L,r as d,G as q,U as G,_ as Y}from"./index-Cj9AfTnA.js";import{r as $}from"./ca-DeP9Rhzt.js";const W={class:"cert-revoke-page"},X=S({__name:"CertRevoke",setup(j){const r=d(),n=d(!1),i=d(!1),t=q({serial:"",revokeReason:"KEY_COMPROMISE"}),C={serial:[{required:!0,message:"请输入证书序列号",trigger:"blur"}],revokeReason:[{required:!0,message:"请选择吊销原因",trigger:"change"}]};async function p(){var o;if(await((o=r.value)==null?void 0:o.validate().catch(()=>!1))){n.value=!0;try{await $(t.serial,{revokeReason:t.revokeReason}),i.value=!0,G.success("证书吊销成功")}catch{}finally{n.value=!1}}}function k(){var s;(s=r.value)==null||s.resetFields(),i.value=!1}return(s,o)=>{const b=T,c=F,l=P,R=w,g=h,_=U,I=D,O=M,f=V,y=H;return v(),A("div",W,[o[4]||(o[4]=m("div",{class:"page-header"},[m("h2",null,"证书吊销"),m("p",null,"输入证书序列号，执行吊销操作")],-1)),e(f,{class:"revoke-card"},{default:a(()=>[e(O,{ref_key:"formRef",ref:r,model:t,rules:C,"label-position":"top",onSubmit:x(p,["prevent"])},{default:a(()=>[e(c,{label:"证书序列号",prop:"serial"},{default:a(()=>[e(b,{modelValue:t.serial,"onUpdate:modelValue":o[0]||(o[0]=u=>t.serial=u),placeholder:"输入要吊销的证书序列号",size:"large"},null,8,["modelValue"])]),_:1}),e(c,{label:"吊销原因",prop:"revokeReason"},{default:a(()=>[e(R,{modelValue:t.revokeReason,"onUpdate:modelValue":o[1]||(o[1]=u=>t.revokeReason=u),placeholder:"选择吊销原因",class:"w-full revoke-select",size:"large"},{default:a(()=>[e(l,{label:"密钥泄露 (Key Compromise)",value:"KEY_COMPROMISE"}),e(l,{label:"CA 泄露 (CA Compromise)",value:"CA_COMPROMISE"}),e(l,{label:"从属关系变更 (Affiliation Changed)",value:"AFFILIATION_CHANGED"}),e(l,{label:"已被替代 (Superseded)",value:"SUPERSEDED"}),e(l,{label:"停止运营 (Cessation of Operation)",value:"CESSATION_OF_OPERATION"}),e(l,{label:"证书挂起 (Certificate Hold)",value:"CERTIFICATE_HOLD"}),e(l,{label:"未指定 (Unspecified)",value:"UNSPECIFIED"})]),_:1},8,["modelValue"])]),_:1}),e(c,{class:"mt-2"},{default:a(()=>[e(I,{title:"确认吊销此证书？此操作不可撤销！","confirm-button-text":"确认吊销","cancel-button-text":"取消","confirm-button-type":"danger",onConfirm:p,width:"280"},{reference:a(()=>[e(_,{type:"danger",loading:n.value,size:"large"},{default:a(()=>[e(g,{class:"mr-1"},{default:a(()=>[e(B(K))]),_:1}),o[2]||(o[2]=E(" 吊销证书 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{name:"fade-slide"},{default:a(()=>[i.value?(v(),z(f,{key:0,class:"mt-6"},{default:a(()=>[e(y,{icon:"success",title:"证书已成功吊销","sub-title":`序列号 ${t.serial} 已被标记为吊销，原因：${t.revokeReason}`},{extra:a(()=>[e(_,{type:"primary",onClick:k},{default:a(()=>[...o[3]||(o[3]=[E("吊销另一张证书",-1)])]),_:1})]),_:1},8,["sub-title"])]),_:1})):L("",!0)]),_:1})])}}}),ie=Y(X,[["__scopeId","data-v-dbe101b5"]]);export{ie as default};
