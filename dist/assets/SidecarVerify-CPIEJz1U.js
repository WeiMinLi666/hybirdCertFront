/* empty css             *//* empty css                             *//* empty css               */import{r as q}from"./request-DHoSJWvM.js";/* empty css                *//* empty css                  *//* empty css                 */import{a as A,o as D,c as G,b as l,e,w as t,T,D as J,K,L as B,M as P,N as Q,h as W,E as X,u as E,a6 as Y,p as I,s as F,x as o,n as M,I as Z,J as ee,j as te,y as N,a7 as ae,a8 as le,r as d,G as $,U as V,a9 as se,_ as oe}from"./index-Cj9AfTnA.js";function re(_,v){return q.post("/sidecar/verify",{objectId:_,rootHash:v})}function ne(_){return q.delete(`/sidecar/objects/${_}`)}const de={class:"grid grid-cols-1 lg:grid-cols-2 gap-x-6"},ie={class:"result-icon"},ce={class:"result-title"},ue={class:"result-subtitle"},fe={class:"text-cyan-400"},_e={class:"text-xs text-slate-200"},ve={class:"danger-notice mb-5"},me={class:"result-icon"},pe={class:"result-title"},be={class:"result-subtitle"},Ie={class:"text-cyan-400"},ge=A({__name:"SidecarVerify",setup(_){const v=d(),g=d(!1),s=d(null),m=d(""),R=d(""),r=$({objectId:"",rootHash:""}),U={objectId:[{required:!0,message:"è¯·è¾“å…¥ Object ID",trigger:"blur"}],rootHash:[{required:!0,message:"è¯·è¾“å…¥ Root Hash",trigger:"blur"}]};async function x(){var a;if(await((a=v.value)==null?void 0:a.validate().catch(()=>!1))){g.value=!0;try{m.value=r.objectId,R.value=r.rootHash,s.value=await re(r.objectId,r.rootHash),V[s.value.verified?"success":"error"](s.value.verified?"å®Œæ•´æ€§éªŒè¯é€šè¿‡":"å®Œæ•´æ€§éªŒè¯å¤±è´¥")}catch{s.value=null}finally{g.value=!1}}}const H=d(),h=d(!1),n=d(null),p=d(""),i=$({objectId:""}),z={objectId:[{required:!0,message:"è¯·è¾“å…¥è¦å¤±æ•ˆçš„ Object ID",trigger:"blur"}]};async function k(){var a;if(await((a=H.value)==null?void 0:a.validate().catch(()=>!1))){try{await se.confirm(`ç¡®è®¤ä½¿å¯¹è±¡ ${i.objectId} å¤±æ•ˆï¼Ÿæ­¤æ“ä½œå°†è‡ªåŠ¨åŠé”€æ‰€æœ‰å…³è”è¯ä¹¦å¹¶å‘å¸ƒ CRLï¼Œä¸å¯æ’¤é”€ã€‚`,"å±é™©æ“ä½œç¡®è®¤",{type:"warning",confirmButtonText:"ç¡®è®¤å¤±æ•ˆ",cancelButtonText:"å–æ¶ˆ"})}catch{return}h.value=!0;try{p.value=i.objectId,await ne(i.objectId),n.value=!0,V.success("å¯¹è±¡å·²å¤±æ•ˆï¼Œå…³è”è¯ä¹¦å·²è‡ªåŠ¨åŠé”€")}catch{n.value=!1,V.error("å¯¹è±¡å¤±æ•ˆæ“ä½œå¤±è´¥")}finally{h.value=!1}}}return(L,a)=>{const y=Q,c=P,j=X,S=W,w=K,b=J,u=ee,C=te,O=Z;return D(),G("div",null,[a[6]||(a[6]=l("div",{class:"page-header"},[l("h2",null,"Sidecar é˜²ç¯¡æ”¹éªŒè¯"),l("p",null,"è¾“å…¥ Object ID å’Œé¢„æœŸ Root Hashï¼Œå¯¹å­˜å‚¨çš„å¤§å¯¹è±¡è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒ")],-1)),e(b,null,{default:t(()=>[e(w,{ref_key:"formRef",ref:v,model:r,rules:U,"label-position":"top",onSubmit:B(x,["prevent"])},{default:t(()=>[l("div",de,[e(c,{label:"Object ID",prop:"objectId"},{default:t(()=>[e(y,{modelValue:r.objectId,"onUpdate:modelValue":a[0]||(a[0]=f=>r.objectId=f),placeholder:"Sidecar å¯¹è±¡ ID"},null,8,["modelValue"])]),_:1}),e(c,{label:"é¢„æœŸ Root Hash",prop:"rootHash"},{default:t(()=>[e(y,{modelValue:r.rootHash,"onUpdate:modelValue":a[1]||(a[1]=f=>r.rootHash=f),placeholder:"Merkle Tree Root Hash"},null,8,["modelValue"])]),_:1})]),e(c,null,{default:t(()=>[e(S,{type:"primary",loading:g.value,onClick:x,size:"large"},{default:t(()=>[e(j,{class:"mr-1"},{default:t(()=>[e(E(Y))]),_:1}),a[3]||(a[3]=I(" éªŒè¯å®Œæ•´æ€§ ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{name:"fade-slide"},{default:t(()=>[s.value!==null?(D(),F(b,{key:0,class:"mt-6 result-card"},{default:t(()=>[l("div",{class:M(["result-header",s.value.verified?"result-success":"result-error"])},[l("span",ie,o(s.value.verified?"âœ…":"âŒ"),1),l("span",ce,o(s.value.verified?"å®Œæ•´æ€§éªŒè¯é€šè¿‡":"å®Œæ•´æ€§éªŒè¯å¤±è´¥"),1)],2),l("p",ue,o(s.value.verified?`å¯¹è±¡ ${m.value} çš„ Merkle Root Hash åŒ¹é…æˆåŠŸï¼Œæ•°æ®æœªè¢«ç¯¡æ”¹`:`å¯¹è±¡ ${m.value} çš„ Hash ä¸åŒ¹é…ï¼Œæ•°æ®å¯èƒ½å·²è¢«ç¯¡æ”¹ï¼`),1),e(O,{column:1,border:"",class:"mt-4"},{default:t(()=>[e(u,{label:"Object ID"},{default:t(()=>[l("code",fe,o(m.value),1)]),_:1}),e(u,{label:"Root Hash"},{default:t(()=>[l("code",_e,o(R.value),1)]),_:1}),e(u,{label:"éªŒè¯çŠ¶æ€"},{default:t(()=>[e(C,{type:s.value.verified?"success":"danger",effect:"dark"},{default:t(()=>[I(o(s.value.verified?"VALID":"INVALID"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1}),a[7]||(a[7]=l("div",{class:"section-header mt-10 mb-4"},[l("span",{class:"section-dot danger"}),l("span",{class:"section-title"},"å¯¹è±¡å¤±æ•ˆ & è”åŠ¨åŠé”€")],-1)),e(b,null,{default:t(()=>[l("div",ve,[e(j,{class:"danger-notice-icon"},{default:t(()=>[e(E(ae))]),_:1}),a[4]||(a[4]=l("span",null,"å±é™©æ“ä½œï¼šä½¿ Sidecar å¯¹è±¡å¤±æ•ˆåŽï¼Œç³»ç»Ÿå°†è‡ªåŠ¨åŠé”€æ‰€æœ‰å¼•ç”¨è¯¥å¯¹è±¡çš„è¯ä¹¦å¹¶å‘å¸ƒæ–°çš„ CRLï¼Œæ­¤æ“ä½œä¸å¯é€†ã€‚",-1))]),e(w,{ref_key:"invalidateFormRef",ref:H,model:i,rules:z,"label-position":"top",onSubmit:B(k,["prevent"])},{default:t(()=>[e(c,{label:"Object ID",prop:"objectId"},{default:t(()=>[e(y,{modelValue:i.objectId,"onUpdate:modelValue":a[2]||(a[2]=f=>i.objectId=f),placeholder:"è¦å¤±æ•ˆçš„ Sidecar å¯¹è±¡ ID"},null,8,["modelValue"])]),_:1}),e(c,null,{default:t(()=>[e(S,{type:"danger",loading:h.value,onClick:k,size:"large"},{default:t(()=>[e(j,{class:"mr-1"},{default:t(()=>[e(E(le))]),_:1}),a[5]||(a[5]=I(" ä½¿å¯¹è±¡å¤±æ•ˆ ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{name:"fade-slide"},{default:t(()=>[n.value!==null?(D(),F(b,{key:0,class:"mt-6 result-card"},{default:t(()=>[l("div",{class:M(["result-header",n.value?"result-success":"result-error"])},[l("span",me,o(n.value?"ðŸ—‘ï¸":"âŒ"),1),l("span",pe,o(n.value?"å¯¹è±¡å·²å¤±æ•ˆ":"æ“ä½œå¤±è´¥"),1)],2),l("p",be,o(n.value?`å¯¹è±¡ ${p.value} å·²è¢«æ ‡è®°ä¸º DELETEDï¼Œå…³è”è¯ä¹¦å·²è‡ªåŠ¨åŠé”€ï¼ŒCRL å·²å‘å¸ƒã€‚`:`å¯¹è±¡ ${p.value} å¤±æ•ˆæ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ ID æ˜¯å¦æ­£ç¡®ã€‚`),1),e(O,{column:1,border:"",class:"mt-4"},{default:t(()=>[e(u,{label:"Object ID"},{default:t(()=>[l("code",Ie,o(p.value),1)]),_:1}),e(u,{label:"æ“ä½œç»“æžœ"},{default:t(()=>[e(C,{type:n.value?"danger":"info",effect:"dark"},{default:t(()=>[I(o(n.value?"DELETED":"FAILED"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1})])}}}),He=oe(ge,[["__scopeId","data-v-d535dcd8"]]);export{He as default};
